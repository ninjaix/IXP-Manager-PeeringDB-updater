-- MySQL Script generated by MySQL Workbench
-- Fri Jan  6 15:57:15 2023
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
-- -----------------------------------------------------
-- Schema ixpmanager
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema ixpmanager
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `ixpmanager` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ;
-- -----------------------------------------------------
-- Schema peeringdb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema peeringdb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `peeringdb` DEFAULT CHARACTER SET utf8mb3 ;
USE `ixpmanager` ;

-- -----------------------------------------------------
-- Table `ixpmanager`.`irrdbconfig`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`irrdbconfig` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `host` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `source` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `notes` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 41
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`company_billing_detail`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`company_billing_detail` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `billingContactName` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `billingAddress1` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `billingAddress2` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `billingAddress3` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `billingTownCity` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `billingPostcode` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `billingCountry` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `billingEmail` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `billingTelephone` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `vatNumber` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `vatRate` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `purchaseOrderRequired` TINYINT(1) NOT NULL DEFAULT '0',
  `invoiceMethod` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `invoiceEmail` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `billingFrequency` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 118
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`company_registration_detail`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`company_registration_detail` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `registeredName` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `companyNumber` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `jurisdiction` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `address1` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `address2` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `address3` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `townCity` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `postcode` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `country` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 118
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`cust`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`cust` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `company_registered_detail_id` INT NULL DEFAULT NULL,
  `company_billing_details_id` INT NULL DEFAULT NULL,
  `irrdb` INT NULL DEFAULT NULL,
  `reseller` INT NULL DEFAULT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `type` INT NULL DEFAULT NULL,
  `shortname` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `abbreviatedName` VARCHAR(30) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `autsys` INT NULL DEFAULT NULL,
  `maxprefixes` INT NULL DEFAULT NULL,
  `peeringemail` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `nocphone` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `noc24hphone` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `nocfax` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `nocemail` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `nochours` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `nocwww` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `peeringmacro` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `peeringmacrov6` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `peeringpolicy` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `corpwww` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `datejoin` DATE NULL DEFAULT NULL,
  `dateleave` DATE NULL DEFAULT NULL,
  `status` SMALLINT NULL DEFAULT NULL,
  `activepeeringmatrix` TINYINT(1) NULL DEFAULT NULL,
  `lastupdatedby` INT NULL DEFAULT NULL,
  `creator` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `MD5Support` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT 'UNKNOWN',
  `isReseller` TINYINT(1) NOT NULL DEFAULT '0',
  `in_manrs` TINYINT(1) NOT NULL DEFAULT '0',
  `in_peeringdb` TINYINT(1) NOT NULL DEFAULT '0',
  `peeringdb_oauth` TINYINT(1) NOT NULL DEFAULT '1',
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `UNIQ_997B25A64082763` (`shortname` ASC) VISIBLE,
  UNIQUE INDEX `UNIQ_997B25A98386213` (`company_registered_detail_id` ASC) VISIBLE,
  UNIQUE INDEX `UNIQ_997B25A84478F0C` (`company_billing_details_id` ASC) VISIBLE,
  INDEX `IDX_997B25A666E98DF` (`irrdb` ASC) VISIBLE,
  INDEX `IDX_997B25A18015899` (`reseller` ASC) VISIBLE,
  CONSTRAINT `FK_997B25A18015899`
    FOREIGN KEY (`reseller`)
    REFERENCES `ixpmanager`.`cust` (`id`),
  CONSTRAINT `FK_997B25A666E98DF`
    FOREIGN KEY (`irrdb`)
    REFERENCES `ixpmanager`.`irrdbconfig` (`id`)
    ON DELETE RESTRICT,
  CONSTRAINT `FK_997B25A84478F0C`
    FOREIGN KEY (`company_billing_details_id`)
    REFERENCES `ixpmanager`.`company_billing_detail` (`id`),
  CONSTRAINT `FK_997B25A98386213`
    FOREIGN KEY (`company_registered_detail_id`)
    REFERENCES `ixpmanager`.`company_registration_detail` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 118
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`user`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`user` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `custid` INT NULL DEFAULT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `username` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `password` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `email` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `authorisedMobile` VARCHAR(30) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `uid` INT NULL DEFAULT NULL,
  `privs` INT NULL DEFAULT NULL,
  `disabled` TINYINT(1) NULL DEFAULT NULL,
  `peeringdb_id` BIGINT NULL DEFAULT NULL,
  `extra_attributes` JSON NULL DEFAULT NULL COMMENT '(DC2Type:json)',
  `prefs` JSON NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  `lastupdatedby` INT NULL DEFAULT NULL,
  `creator` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `UNIQ_8D93D649F85E0677` (`username` ASC) VISIBLE,
  UNIQUE INDEX `UNIQ_8D93D649F2C6186B` (`peeringdb_id` ASC) VISIBLE,
  INDEX `IDX_8D93D649DA0209B9` (`custid` ASC) VISIBLE,
  CONSTRAINT `FK_8D93D649DA0209B9`
    FOREIGN KEY (`custid`)
    REFERENCES `ixpmanager`.`cust` (`id`)
    ON DELETE SET NULL)
ENGINE = InnoDB
AUTO_INCREMENT = 103
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`api_keys`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`api_keys` (
  `id` BIGINT NOT NULL AUTO_INCREMENT,
  `user_id` INT NOT NULL,
  `apiKey` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `description` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `expires` DATETIME NULL DEFAULT NULL,
  `allowedIPs` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `lastseenAt` DATETIME NULL DEFAULT NULL,
  `lastseenFrom` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `UNIQ_9579321F800A1141` (`apiKey` ASC) VISIBLE,
  INDEX `IDX_9579321FA76ED395` (`user_id` ASC) VISIBLE,
  CONSTRAINT `FK_9579321FA76ED395`
    FOREIGN KEY (`user_id`)
    REFERENCES `ixpmanager`.`user` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
AUTO_INCREMENT = 4
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`infrastructure`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`infrastructure` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `shortname` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `isPrimary` TINYINT(1) NOT NULL DEFAULT '0',
  `peeringdb_ix_id` BIGINT NULL DEFAULT NULL,
  `ixf_ix_id` BIGINT NULL DEFAULT NULL,
  `country` VARCHAR(2) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `notes` LONGTEXT NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `IXPSN` (`shortname` ASC) VISIBLE)
ENGINE = InnoDB
AUTO_INCREMENT = 26
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`vlan`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`vlan` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `infrastructureid` INT NOT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `config_name` VARCHAR(32) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `number` INT NULL DEFAULT NULL,
  `private` TINYINT(1) NOT NULL DEFAULT '0',
  `peering_matrix` TINYINT(1) NOT NULL DEFAULT '0',
  `peering_manager` TINYINT(1) NOT NULL DEFAULT '0',
  `notes` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `infra_config_name` (`infrastructureid` ASC, `config_name` ASC) VISIBLE,
  INDEX `IDX_F83104A1721EBF79` (`infrastructureid` ASC) VISIBLE,
  CONSTRAINT `FK_F83104A1721EBF79`
    FOREIGN KEY (`infrastructureid`)
    REFERENCES `ixpmanager`.`infrastructure` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 29
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`atlas_runs`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`atlas_runs` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `vlan_id` INT NULL DEFAULT NULL,
  `protocol` INT NULL DEFAULT NULL,
  `scheduled_at` DATETIME NULL DEFAULT NULL,
  `started_at` DATETIME NULL DEFAULT NULL,
  `completed_at` DATETIME NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `atlas_runs_vlan_id_foreign` (`vlan_id` ASC) VISIBLE,
  CONSTRAINT `atlas_runs_vlan_id_foreign`
    FOREIGN KEY (`vlan_id`)
    REFERENCES `ixpmanager`.`vlan` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`atlas_measurements`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`atlas_measurements` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `run_id` INT NOT NULL,
  `cust_source` INT NULL DEFAULT NULL,
  `cust_dest` INT NULL DEFAULT NULL,
  `atlas_id` INT NULL DEFAULT NULL,
  `atlas_create` DATETIME NULL DEFAULT NULL,
  `atlas_start` DATETIME NULL DEFAULT NULL,
  `atlas_stop` DATETIME NULL DEFAULT NULL,
  `atlas_data` JSON NULL DEFAULT NULL,
  `atlas_request` JSON NULL DEFAULT NULL,
  `atlas_state` VARCHAR(255) NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `atlas_measurements_cust_source_foreign` (`cust_source` ASC) VISIBLE,
  INDEX `atlas_measurements_cust_dest_foreign` (`cust_dest` ASC) VISIBLE,
  INDEX `atlas_measurements_run_id_foreign` (`run_id` ASC) VISIBLE,
  CONSTRAINT `atlas_measurements_cust_dest_foreign`
    FOREIGN KEY (`cust_dest`)
    REFERENCES `ixpmanager`.`cust` (`id`),
  CONSTRAINT `atlas_measurements_cust_source_foreign`
    FOREIGN KEY (`cust_source`)
    REFERENCES `ixpmanager`.`cust` (`id`),
  CONSTRAINT `atlas_measurements_run_id_foreign`
    FOREIGN KEY (`run_id`)
    REFERENCES `ixpmanager`.`atlas_runs` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`atlas_probes`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`atlas_probes` (
  `id` BIGINT NOT NULL AUTO_INCREMENT,
  `cust_id` INT NOT NULL,
  `address_v4` VARCHAR(15) NULL DEFAULT NULL,
  `address_v6` VARCHAR(39) NULL DEFAULT NULL,
  `v4_enabled` TINYINT NULL DEFAULT NULL,
  `v6_enabled` TINYINT NULL DEFAULT NULL,
  `asn` INT NULL DEFAULT NULL,
  `atlas_id` INT NOT NULL,
  `is_anchor` TINYINT NOT NULL,
  `is_public` TINYINT NOT NULL,
  `last_connected` DATETIME NULL DEFAULT NULL,
  `status` VARCHAR(255) NULL DEFAULT NULL,
  `api_data` JSON NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `atlas_probes_cust_id_foreign` (`cust_id` ASC) VISIBLE,
  CONSTRAINT `atlas_probes_cust_id_foreign`
    FOREIGN KEY (`cust_id`)
    REFERENCES `ixpmanager`.`cust` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`atlas_results`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`atlas_results` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `measurement_id` INT NULL DEFAULT NULL,
  `routing` VARCHAR(255) NULL DEFAULT NULL,
  `path` LONGTEXT NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `atlas_results_measurement_id_unique` (`measurement_id` ASC) VISIBLE,
  CONSTRAINT `atlas_results_measurement_id_foreign`
    FOREIGN KEY (`measurement_id`)
    REFERENCES `ixpmanager`.`atlas_measurements` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`bgp_sessions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`bgp_sessions` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `srcipaddressid` INT NOT NULL,
  `protocol` INT NOT NULL,
  `dstipaddressid` INT NOT NULL,
  `packetcount` INT NOT NULL DEFAULT '0',
  `last_seen` DATETIME NOT NULL,
  `source` VARCHAR(40) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `src_protocol_dst` (`srcipaddressid` ASC, `protocol` ASC, `dstipaddressid` ASC) VISIBLE)
ENGINE = InnoDB
AUTO_INCREMENT = 1385
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`bgpsessiondata`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`bgpsessiondata` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `srcipaddressid` INT NULL DEFAULT NULL,
  `dstipaddressid` INT NULL DEFAULT NULL,
  `protocol` INT NULL DEFAULT NULL,
  `vlan` INT NULL DEFAULT NULL,
  `packetcount` INT NULL DEFAULT '0',
  `timestamp` DATETIME NULL DEFAULT NULL,
  `source` VARCHAR(40) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `idx_timestamp` (`timestamp` ASC) VISIBLE)
ENGINE = InnoDB
AUTO_INCREMENT = 19901
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`location`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`location` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `pdb_facility_id` BIGINT NULL DEFAULT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `shortname` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `tag` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `address` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `city` VARCHAR(50) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `country` VARCHAR(2) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `nocphone` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `nocfax` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `nocemail` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `officephone` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `officefax` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `officeemail` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `notes` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `UNIQ_5E9E89CB64082763` (`shortname` ASC) VISIBLE)
ENGINE = InnoDB
AUTO_INCREMENT = 24
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`cabinet`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`cabinet` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `locationid` INT NULL DEFAULT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `colocation` VARCHAR(255) NULL DEFAULT NULL,
  `height` INT NULL DEFAULT NULL,
  `u_counts_from` SMALLINT NULL DEFAULT NULL,
  `type` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `notes` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `UNIQ_4CED05B05E237E06` (`name` ASC) VISIBLE,
  INDEX `IDX_4CED05B03530CCF` (`locationid` ASC) VISIBLE,
  CONSTRAINT `FK_4CED05B03530CCF`
    FOREIGN KEY (`locationid`)
    REFERENCES `ixpmanager`.`location` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 30
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`vendor`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`vendor` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `shortname` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `nagios_name` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `bundle_name` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 19
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`console_server`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`console_server` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `vendor_id` INT NULL DEFAULT NULL,
  `cabinet_id` INT NULL DEFAULT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `hostname` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `model` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `serialNumber` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `active` TINYINT(1) NULL DEFAULT '1',
  `notes` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `UNIQ_92A539235E237E06` (`name` ASC) VISIBLE,
  INDEX `IDX_92A53923F603EE73` (`vendor_id` ASC) VISIBLE,
  INDEX `IDX_92A53923D351EC` (`cabinet_id` ASC) VISIBLE,
  CONSTRAINT `FK_92A53923D351EC`
    FOREIGN KEY (`cabinet_id`)
    REFERENCES `ixpmanager`.`cabinet` (`id`),
  CONSTRAINT `FK_92A53923F603EE73`
    FOREIGN KEY (`vendor_id`)
    REFERENCES `ixpmanager`.`vendor` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`consoleserverconnection`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`consoleserverconnection` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `custid` INT NULL DEFAULT NULL,
  `console_server_id` INT NULL DEFAULT NULL,
  `description` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `port` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `speed` INT NULL DEFAULT NULL,
  `parity` INT NULL DEFAULT NULL,
  `stopbits` INT NULL DEFAULT NULL,
  `flowcontrol` INT NULL DEFAULT NULL,
  `autobaud` TINYINT(1) NULL DEFAULT NULL,
  `notes` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `console_server_port_uniq` (`console_server_id` ASC, `port` ASC) VISIBLE,
  INDEX `IDX_530316DCDA0209B9` (`custid` ASC) VISIBLE,
  INDEX `IDX_530316DCF472E7C6` (`console_server_id` ASC) VISIBLE,
  CONSTRAINT `FK_530316DCDA0209B9`
    FOREIGN KEY (`custid`)
    REFERENCES `ixpmanager`.`cust` (`id`)
    ON DELETE CASCADE,
  CONSTRAINT `FK_530316DCF472E7C6`
    FOREIGN KEY (`console_server_id`)
    REFERENCES `ixpmanager`.`console_server` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`contact`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`contact` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `custid` INT NULL DEFAULT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `position` VARCHAR(50) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `email` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `phone` VARCHAR(50) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `mobile` VARCHAR(50) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `facilityaccess` TINYINT(1) NOT NULL DEFAULT '0',
  `mayauthorize` TINYINT(1) NOT NULL DEFAULT '0',
  `notes` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `updated_at` DATETIME NULL DEFAULT NULL,
  `lastupdatedby` INT NULL DEFAULT NULL,
  `creator` VARCHAR(32) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `IDX_4C62E638DA0209B9` (`custid` ASC) VISIBLE,
  CONSTRAINT `FK_4C62E638DA0209B9`
    FOREIGN KEY (`custid`)
    REFERENCES `ixpmanager`.`cust` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
AUTO_INCREMENT = 153
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`contact_group`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`contact_group` (
  `id` BIGINT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(20) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `description` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `type` VARCHAR(20) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `active` TINYINT(1) NOT NULL DEFAULT '1',
  `limited_to` INT NOT NULL DEFAULT '0',
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `UNIQ_40EA54CA5E237E06` (`name` ASC) VISIBLE)
ENGINE = InnoDB
AUTO_INCREMENT = 5
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`contact_to_group`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`contact_to_group` (
  `contact_id` INT NOT NULL,
  `contact_group_id` BIGINT NOT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`contact_id`, `contact_group_id`),
  INDEX `IDX_FCD9E962E7A1254A` (`contact_id` ASC) VISIBLE,
  INDEX `IDX_FCD9E962647145D0` (`contact_group_id` ASC) VISIBLE,
  CONSTRAINT `FK_FCD9E962647145D0`
    FOREIGN KEY (`contact_group_id`)
    REFERENCES `ixpmanager`.`contact_group` (`id`),
  CONSTRAINT `FK_FCD9E962E7A1254A`
    FOREIGN KEY (`contact_id`)
    REFERENCES `ixpmanager`.`contact` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`corebundles`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`corebundles` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `description` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `type` INT NOT NULL,
  `graph_title` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `bfd` TINYINT(1) NOT NULL DEFAULT '0',
  `ipv4_subnet` VARCHAR(18) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `ipv6_subnet` VARCHAR(43) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `stp` TINYINT(1) NOT NULL DEFAULT '0',
  `cost` INT UNSIGNED NULL DEFAULT NULL,
  `preference` INT UNSIGNED NULL DEFAULT NULL,
  `enabled` TINYINT(1) NOT NULL DEFAULT '0',
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 17
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`virtualinterface`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`virtualinterface` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `custid` INT NULL DEFAULT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `description` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `mtu` INT NULL DEFAULT NULL,
  `trunk` TINYINT(1) NULL DEFAULT NULL,
  `channelgroup` INT NULL DEFAULT NULL,
  `lag_framing` TINYINT(1) NOT NULL DEFAULT '0',
  `fastlacp` TINYINT(1) NOT NULL DEFAULT '0',
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `IDX_11D9014FDA0209B9` (`custid` ASC) VISIBLE,
  CONSTRAINT `FK_11D9014FDA0209B9`
    FOREIGN KEY (`custid`)
    REFERENCES `ixpmanager`.`cust` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
AUTO_INCREMENT = 234
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`switch`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`switch` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `infrastructure` INT NULL DEFAULT NULL,
  `cabinetid` INT NULL DEFAULT NULL,
  `vendorid` INT NULL DEFAULT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `asn` INT UNSIGNED NULL DEFAULT NULL,
  `hostname` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `mgmt_mac_address` VARCHAR(12) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `loopback_ip` VARCHAR(39) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `loopback_name` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `ipv4addr` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `ipv6addr` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `snmppasswd` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `model` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `active` TINYINT(1) NULL DEFAULT '1',
  `poll` TINYINT(1) NOT NULL DEFAULT '1',
  `os` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `osDate` DATETIME NULL DEFAULT NULL,
  `osVersion` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `serialNumber` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `mauSupported` TINYINT(1) NULL DEFAULT NULL,
  `lastPolled` DATETIME NULL DEFAULT NULL,
  `snmp_engine_time` BIGINT NULL DEFAULT NULL,
  `snmp_system_uptime` BIGINT NULL DEFAULT NULL,
  `snmp_engine_boots` BIGINT NULL DEFAULT NULL,
  `notes` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `UNIQ_6FE94B185E237E06` (`name` ASC) VISIBLE,
  UNIQUE INDEX `UNIQ_6FE94B1850C101F8` (`loopback_ip` ASC) VISIBLE,
  INDEX `IDX_6FE94B18D129B190` (`infrastructure` ASC) VISIBLE,
  INDEX `IDX_6FE94B182B96718A` (`cabinetid` ASC) VISIBLE,
  INDEX `IDX_6FE94B18420FB55F` (`vendorid` ASC) VISIBLE,
  CONSTRAINT `FK_6FE94B182B96718A`
    FOREIGN KEY (`cabinetid`)
    REFERENCES `ixpmanager`.`cabinet` (`id`),
  CONSTRAINT `FK_6FE94B18420FB55F`
    FOREIGN KEY (`vendorid`)
    REFERENCES `ixpmanager`.`vendor` (`id`),
  CONSTRAINT `FK_6FE94B18D129B190`
    FOREIGN KEY (`infrastructure`)
    REFERENCES `ixpmanager`.`infrastructure` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 34
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`switchport`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`switchport` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `switchid` INT NULL DEFAULT NULL,
  `type` INT NULL DEFAULT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `active` TINYINT(1) NOT NULL DEFAULT '1',
  `ifIndex` INT NULL DEFAULT NULL,
  `ifName` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `ifAlias` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `ifHighSpeed` INT NULL DEFAULT NULL,
  `ifMtu` INT NULL DEFAULT NULL,
  `ifPhysAddress` VARCHAR(17) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `ifAdminStatus` INT NULL DEFAULT NULL,
  `ifOperStatus` INT NULL DEFAULT NULL,
  `ifLastChange` INT NULL DEFAULT NULL,
  `lastSnmpPoll` DATETIME NULL DEFAULT NULL,
  `lagIfIndex` INT NULL DEFAULT NULL,
  `mauType` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `mauState` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `mauAvailability` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `mauJacktype` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `mauAutoNegSupported` TINYINT(1) NULL DEFAULT NULL,
  `mauAutoNegAdminState` TINYINT(1) NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `IDX_F84274F1DC2C08F8` (`switchid` ASC) VISIBLE,
  CONSTRAINT `FK_F84274F1DC2C08F8`
    FOREIGN KEY (`switchid`)
    REFERENCES `ixpmanager`.`switch` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 3335
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`physicalinterface`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`physicalinterface` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `switchportid` INT NULL DEFAULT NULL,
  `fanout_physical_interface_id` INT NULL DEFAULT NULL,
  `virtualinterfaceid` INT NULL DEFAULT NULL,
  `status` INT NULL DEFAULT NULL,
  `speed` INT NULL DEFAULT NULL,
  `duplex` VARCHAR(16) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `rate_limit` INT UNSIGNED NULL DEFAULT NULL,
  `autoneg` TINYINT(1) NOT NULL DEFAULT '1',
  `notes` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `UNIQ_5FFF4D60E5F6FACB` (`switchportid` ASC) VISIBLE,
  UNIQUE INDEX `UNIQ_5FFF4D602E68AB8C` (`fanout_physical_interface_id` ASC) VISIBLE,
  INDEX `IDX_5FFF4D60BFDF15D5` (`virtualinterfaceid` ASC) VISIBLE,
  CONSTRAINT `FK_5FFF4D602E68AB8C`
    FOREIGN KEY (`fanout_physical_interface_id`)
    REFERENCES `ixpmanager`.`physicalinterface` (`id`)
    ON DELETE RESTRICT,
  CONSTRAINT `FK_5FFF4D60BFDF15D5`
    FOREIGN KEY (`virtualinterfaceid`)
    REFERENCES `ixpmanager`.`virtualinterface` (`id`)
    ON DELETE CASCADE,
  CONSTRAINT `FK_5FFF4D60E5F6FACB`
    FOREIGN KEY (`switchportid`)
    REFERENCES `ixpmanager`.`switchport` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 317
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`coreinterfaces`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`coreinterfaces` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `physical_interface_id` INT NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `UNIQ_E1A404B7FF664B20` (`physical_interface_id` ASC) VISIBLE,
  CONSTRAINT `FK_E1A404B7FF664B20`
    FOREIGN KEY (`physical_interface_id`)
    REFERENCES `ixpmanager`.`physicalinterface` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 67
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`corelinks`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`corelinks` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `core_interface_sidea_id` INT NOT NULL,
  `core_interface_sideb_id` INT NOT NULL,
  `core_bundle_id` INT NOT NULL,
  `bfd` TINYINT(1) NOT NULL DEFAULT '0',
  `ipv4_subnet` VARCHAR(18) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `ipv6_subnet` VARCHAR(43) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `enabled` TINYINT(1) NOT NULL DEFAULT '0',
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `UNIQ_BE421236BEBB85C6` (`core_interface_sidea_id` ASC) VISIBLE,
  UNIQUE INDEX `UNIQ_BE421236AC0E2A28` (`core_interface_sideb_id` ASC) VISIBLE,
  INDEX `IDX_BE421236BE9AE9F7` (`core_bundle_id` ASC) VISIBLE,
  CONSTRAINT `FK_BE421236AC0E2A28`
    FOREIGN KEY (`core_interface_sideb_id`)
    REFERENCES `ixpmanager`.`coreinterfaces` (`id`),
  CONSTRAINT `FK_BE421236BE9AE9F7`
    FOREIGN KEY (`core_bundle_id`)
    REFERENCES `ixpmanager`.`corebundles` (`id`),
  CONSTRAINT `FK_BE421236BEBB85C6`
    FOREIGN KEY (`core_interface_sidea_id`)
    REFERENCES `ixpmanager`.`coreinterfaces` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 34
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`cust_notes`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`cust_notes` (
  `id` BIGINT NOT NULL AUTO_INCREMENT,
  `customer_id` INT NOT NULL,
  `private` TINYINT(1) NOT NULL DEFAULT '1',
  `title` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `note` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `IDX_6377D8679395C3F3` (`customer_id` ASC) VISIBLE,
  CONSTRAINT `FK_6377D8679395C3F3`
    FOREIGN KEY (`customer_id`)
    REFERENCES `ixpmanager`.`cust` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
AUTO_INCREMENT = 5
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`cust_tag`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`cust_tag` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `tag` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `display_as` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `description` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `internal_only` TINYINT(1) NOT NULL DEFAULT '0',
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `UNIQ_6B54CFB8389B783` (`tag` ASC) VISIBLE)
ENGINE = InnoDB
AUTO_INCREMENT = 3
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`cust_to_cust_tag`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`cust_to_cust_tag` (
  `customer_tag_id` INT NOT NULL,
  `customer_id` INT NOT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`customer_tag_id`, `customer_id`),
  INDEX `IDX_A6CFB30CB17BF40` (`customer_tag_id` ASC) VISIBLE,
  INDEX `IDX_A6CFB30C9395C3F3` (`customer_id` ASC) VISIBLE,
  CONSTRAINT `FK_A6CFB30C9395C3F3`
    FOREIGN KEY (`customer_id`)
    REFERENCES `ixpmanager`.`cust` (`id`),
  CONSTRAINT `FK_A6CFB30CB17BF40`
    FOREIGN KEY (`customer_tag_id`)
    REFERENCES `ixpmanager`.`cust_tag` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`custkit`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`custkit` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `custid` INT NULL DEFAULT NULL,
  `cabinetid` INT NULL DEFAULT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `descr` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `IDX_8127F9AADA0209B9` (`custid` ASC) VISIBLE,
  INDEX `IDX_8127F9AA2B96718A` (`cabinetid` ASC) VISIBLE,
  CONSTRAINT `FK_8127F9AA2B96718A`
    FOREIGN KEY (`cabinetid`)
    REFERENCES `ixpmanager`.`cabinet` (`id`),
  CONSTRAINT `FK_8127F9AADA0209B9`
    FOREIGN KEY (`custid`)
    REFERENCES `ixpmanager`.`cust` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
AUTO_INCREMENT = 17
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`customer_to_users`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`customer_to_users` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `customer_id` INT NOT NULL,
  `user_id` INT NOT NULL,
  `privs` INT NOT NULL,
  `extra_attributes` JSON NULL DEFAULT NULL COMMENT '(DC2Type:json)',
  `last_login_date` DATETIME NULL DEFAULT NULL,
  `last_login_from` TINYTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `last_login_via` VARCHAR(50) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `customer_user` (`customer_id` ASC, `user_id` ASC) VISIBLE,
  INDEX `IDX_337AD7F69395C3F3` (`customer_id` ASC) VISIBLE,
  INDEX `IDX_337AD7F6A76ED395` (`user_id` ASC) VISIBLE,
  CONSTRAINT `FK_337AD7F69395C3F3`
    FOREIGN KEY (`customer_id`)
    REFERENCES `ixpmanager`.`cust` (`id`),
  CONSTRAINT `FK_337AD7F6A76ED395`
    FOREIGN KEY (`user_id`)
    REFERENCES `ixpmanager`.`user` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 117
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`docstore_customer_directories`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`docstore_customer_directories` (
  `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
  `cust_id` INT NOT NULL,
  `parent_dir_id` BIGINT UNSIGNED NULL DEFAULT NULL,
  `name` VARCHAR(100) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `description` TEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `docstore_customer_directories_cust_id_foreign` (`cust_id` ASC) VISIBLE,
  INDEX `docstore_customer_directories_parent_dir_id_index` (`parent_dir_id` ASC) VISIBLE,
  CONSTRAINT `docstore_customer_directories_cust_id_foreign`
    FOREIGN KEY (`cust_id`)
    REFERENCES `ixpmanager`.`cust` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 11
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`docstore_customer_files`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`docstore_customer_files` (
  `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
  `cust_id` INT NOT NULL,
  `docstore_customer_directory_id` BIGINT UNSIGNED NULL DEFAULT NULL,
  `name` VARCHAR(100) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `disk` VARCHAR(100) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL DEFAULT 'docstore_customers',
  `path` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL DEFAULT '',
  `sha256` VARCHAR(64) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `description` TEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `min_privs` SMALLINT NOT NULL,
  `file_last_updated` DATETIME NOT NULL,
  `created_by` INT NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `docstore_customer_files_cust_id_foreign` (`cust_id` ASC) VISIBLE,
  INDEX `docstore_customer_files_docstore_customer_directory_id_foreign` (`docstore_customer_directory_id` ASC) VISIBLE,
  CONSTRAINT `docstore_customer_files_cust_id_foreign`
    FOREIGN KEY (`cust_id`)
    REFERENCES `ixpmanager`.`cust` (`id`),
  CONSTRAINT `docstore_customer_files_docstore_customer_directory_id_foreign`
    FOREIGN KEY (`docstore_customer_directory_id`)
    REFERENCES `ixpmanager`.`docstore_customer_directories` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 33
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`docstore_directories`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`docstore_directories` (
  `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
  `parent_dir_id` BIGINT UNSIGNED NULL DEFAULT NULL,
  `name` VARCHAR(100) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `description` TEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `docstore_directories_parent_dir_id_index` (`parent_dir_id` ASC) VISIBLE)
ENGINE = InnoDB
AUTO_INCREMENT = 2
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`docstore_files`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`docstore_files` (
  `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
  `docstore_directory_id` BIGINT UNSIGNED NULL DEFAULT NULL,
  `name` VARCHAR(100) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `disk` VARCHAR(100) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL DEFAULT 'docstore',
  `path` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL DEFAULT '',
  `sha256` VARCHAR(64) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `description` TEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `min_privs` SMALLINT NOT NULL,
  `file_last_updated` DATETIME NOT NULL,
  `created_by` INT NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `docstore_files_docstore_directory_id_foreign` (`docstore_directory_id` ASC) VISIBLE,
  CONSTRAINT `docstore_files_docstore_directory_id_foreign`
    FOREIGN KEY (`docstore_directory_id`)
    REFERENCES `ixpmanager`.`docstore_directories` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 2
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`docstore_logs`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`docstore_logs` (
  `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
  `docstore_file_id` BIGINT UNSIGNED NOT NULL,
  `downloaded_by` INT NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `docstore_logs_docstore_file_id_foreign` (`docstore_file_id` ASC) VISIBLE,
  INDEX `docstore_logs_created_at_index` (`created_at` ASC) VISIBLE,
  CONSTRAINT `docstore_logs_docstore_file_id_foreign`
    FOREIGN KEY (`docstore_file_id`)
    REFERENCES `ixpmanager`.`docstore_files` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 5
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`failed_jobs`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`failed_jobs` (
  `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
  `connection` TEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `queue` TEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `payload` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `exception` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `failed_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`ipv4address`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`ipv4address` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `vlanid` INT NULL DEFAULT NULL,
  `address` VARCHAR(16) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `vlan_address` (`vlanid` ASC, `address` ASC) VISIBLE,
  INDEX `IDX_A44BCBEEF48D6D0` (`vlanid` ASC) VISIBLE,
  CONSTRAINT `FK_A44BCBEEF48D6D0`
    FOREIGN KEY (`vlanid`)
    REFERENCES `ixpmanager`.`vlan` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 938
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`ipv6address`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`ipv6address` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `vlanid` INT NULL DEFAULT NULL,
  `address` VARCHAR(40) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `vlan_address` (`vlanid` ASC, `address` ASC) VISIBLE,
  INDEX `IDX_E66ECC93F48D6D0` (`vlanid` ASC) VISIBLE,
  CONSTRAINT `FK_E66ECC93F48D6D0`
    FOREIGN KEY (`vlanid`)
    REFERENCES `ixpmanager`.`vlan` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 1372
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`irrdb_asn`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`irrdb_asn` (
  `id` BIGINT NOT NULL AUTO_INCREMENT,
  `customer_id` INT NOT NULL,
  `asn` INT UNSIGNED NOT NULL,
  `protocol` INT NOT NULL,
  `first_seen` DATETIME NULL DEFAULT NULL,
  `last_seen` DATETIME NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `custasn` (`asn` ASC, `protocol` ASC, `customer_id` ASC) VISIBLE,
  INDEX `IDX_87BFC5569395C3F3` (`customer_id` ASC) VISIBLE,
  CONSTRAINT `FK_87BFC5569395C3F3`
    FOREIGN KEY (`customer_id`)
    REFERENCES `ixpmanager`.`cust` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
AUTO_INCREMENT = 608056
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`irrdb_prefix`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`irrdb_prefix` (
  `id` BIGINT NOT NULL AUTO_INCREMENT,
  `customer_id` INT NOT NULL,
  `prefix` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `protocol` INT NOT NULL,
  `first_seen` DATETIME NULL DEFAULT NULL,
  `last_seen` DATETIME NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `custprefix` (`prefix` ASC, `protocol` ASC, `customer_id` ASC) VISIBLE,
  INDEX `IDX_FE73E77C9395C3F3` (`customer_id` ASC) VISIBLE,
  CONSTRAINT `FK_FE73E77C9395C3F3`
    FOREIGN KEY (`customer_id`)
    REFERENCES `ixpmanager`.`cust` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
AUTO_INCREMENT = 13658864
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`vlaninterface`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`vlaninterface` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `ipv4addressid` INT NULL DEFAULT NULL,
  `ipv6addressid` INT NULL DEFAULT NULL,
  `virtualinterfaceid` INT NULL DEFAULT NULL,
  `vlanid` INT NULL DEFAULT NULL,
  `ipv4enabled` TINYINT(1) NULL DEFAULT '0',
  `ipv4hostname` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `ipv6enabled` TINYINT(1) NULL DEFAULT '0',
  `ipv6hostname` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `mcastenabled` TINYINT(1) NULL DEFAULT '0',
  `irrdbfilter` TINYINT(1) NULL DEFAULT '1',
  `bgpmd5secret` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `ipv4bgpmd5secret` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `ipv6bgpmd5secret` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `maxbgpprefix` INT NULL DEFAULT NULL,
  `rsclient` TINYINT(1) NULL DEFAULT NULL,
  `rsmorespecifics` TINYINT(1) NOT NULL DEFAULT '0',
  `ipv4canping` TINYINT(1) NULL DEFAULT NULL,
  `ipv6canping` TINYINT(1) NULL DEFAULT NULL,
  `ipv4monitorrcbgp` TINYINT(1) NULL DEFAULT NULL,
  `ipv6monitorrcbgp` TINYINT(1) NULL DEFAULT NULL,
  `as112client` TINYINT(1) NULL DEFAULT NULL,
  `busyhost` TINYINT(1) NULL DEFAULT NULL,
  `notes` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `UNIQ_B4B4411A73720641` (`ipv4addressid` ASC) VISIBLE,
  UNIQUE INDEX `UNIQ_B4B4411A7787D67C` (`ipv6addressid` ASC) VISIBLE,
  INDEX `IDX_B4B4411ABFDF15D5` (`virtualinterfaceid` ASC) VISIBLE,
  INDEX `IDX_B4B4411AF48D6D0` (`vlanid` ASC) VISIBLE,
  CONSTRAINT `FK_B4B4411A73720641`
    FOREIGN KEY (`ipv4addressid`)
    REFERENCES `ixpmanager`.`ipv4address` (`id`)
    ON DELETE RESTRICT,
  CONSTRAINT `FK_B4B4411A7787D67C`
    FOREIGN KEY (`ipv6addressid`)
    REFERENCES `ixpmanager`.`ipv6address` (`id`)
    ON DELETE RESTRICT,
  CONSTRAINT `FK_B4B4411ABFDF15D5`
    FOREIGN KEY (`virtualinterfaceid`)
    REFERENCES `ixpmanager`.`virtualinterface` (`id`)
    ON DELETE CASCADE,
  CONSTRAINT `FK_B4B4411AF48D6D0`
    FOREIGN KEY (`vlanid`)
    REFERENCES `ixpmanager`.`vlan` (`id`)
    ON DELETE RESTRICT)
ENGINE = InnoDB
AUTO_INCREMENT = 210
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`l2address`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`l2address` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `vlan_interface_id` INT NOT NULL,
  `mac` VARCHAR(12) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `firstseen` DATETIME NULL DEFAULT NULL,
  `lastseen` DATETIME NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `mac_vlanint` (`mac` ASC, `vlan_interface_id` ASC) VISIBLE,
  INDEX `IDX_B9482E1D6AB5F82` (`vlan_interface_id` ASC) VISIBLE,
  CONSTRAINT `FK_B9482E1D6AB5F82`
    FOREIGN KEY (`vlan_interface_id`)
    REFERENCES `ixpmanager`.`vlaninterface` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
AUTO_INCREMENT = 125
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`log`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`log` (
  `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
  `user_id` INT NULL DEFAULT NULL,
  `model` VARCHAR(100) NOT NULL,
  `model_id` BIGINT UNSIGNED NULL DEFAULT NULL,
  `action` VARCHAR(7) NOT NULL,
  `message` TEXT NOT NULL,
  `models` JSON NOT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `log_user_id_foreign` (`user_id` ASC) VISIBLE,
  INDEX `log_action_index` (`action` ASC) VISIBLE,
  INDEX `log_model_model_id_index` (`model` ASC, `model_id` ASC) VISIBLE,
  CONSTRAINT `log_user_id_foreign`
    FOREIGN KEY (`user_id`)
    REFERENCES `ixpmanager`.`user` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 501986
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`logos`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`logos` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `customer_id` INT NULL DEFAULT NULL,
  `type` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `original_name` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `stored_name` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `uploaded_by` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `width` INT NOT NULL,
  `height` INT NOT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `IDX_9F54004F9395C3F3` (`customer_id` ASC) VISIBLE,
  CONSTRAINT `FK_9F54004F9395C3F3`
    FOREIGN KEY (`customer_id`)
    REFERENCES `ixpmanager`.`cust` (`id`)
    ON DELETE RESTRICT)
ENGINE = InnoDB
AUTO_INCREMENT = 101
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`macaddress`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`macaddress` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `virtualinterfaceid` INT NULL DEFAULT NULL,
  `firstseen` DATETIME NULL DEFAULT NULL,
  `lastseen` DATETIME NULL DEFAULT NULL,
  `mac` VARCHAR(12) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `IDX_42CD65F6BFDF15D5` (`virtualinterfaceid` ASC) VISIBLE,
  CONSTRAINT `FK_42CD65F6BFDF15D5`
    FOREIGN KEY (`virtualinterfaceid`)
    REFERENCES `ixpmanager`.`virtualinterface` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
AUTO_INCREMENT = 2374158
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`migrations`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`migrations` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `migration` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `batch` INT NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 28
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`netinfo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`netinfo` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `vlan_id` INT NOT NULL,
  `protocol` INT NOT NULL,
  `property` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `ix` INT NOT NULL DEFAULT '0',
  `value` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `IDX_F843DE6B8B4937A1` (`vlan_id` ASC) VISIBLE,
  INDEX `VlanProtoProp` (`protocol` ASC, `property` ASC, `vlan_id` ASC) VISIBLE,
  CONSTRAINT `FK_F843DE6B8B4937A1`
    FOREIGN KEY (`vlan_id`)
    REFERENCES `ixpmanager`.`vlan` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`networkinfo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`networkinfo` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `vlanid` INT NULL DEFAULT NULL,
  `protocol` INT NULL DEFAULT NULL,
  `network` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `masklen` INT NULL DEFAULT NULL,
  `rs1address` VARCHAR(40) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `rs2address` VARCHAR(40) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `dnsfile` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `IDX_6A0AF167F48D6D0` (`vlanid` ASC) VISIBLE,
  CONSTRAINT `FK_6A0AF167F48D6D0`
    FOREIGN KEY (`vlanid`)
    REFERENCES `ixpmanager`.`vlan` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 25
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`oui`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`oui` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `oui` VARCHAR(6) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `organisation` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `UNIQ_DAEC0140DAEC0140` (`oui` ASC) VISIBLE)
ENGINE = InnoDB
AUTO_INCREMENT = 33153
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`password_resets`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`password_resets` (
  `email` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `token` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  INDEX `password_resets_email_index` (`email` ASC) VISIBLE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`patch_panel`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`patch_panel` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `cabinet_id` INT NULL DEFAULT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `colo_reference` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `cable_type` INT NOT NULL,
  `connector_type` INT NOT NULL,
  `installation_date` DATE NULL DEFAULT NULL,
  `port_prefix` VARCHAR(20) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `chargeable` INT NOT NULL DEFAULT '0',
  `location_notes` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `active` TINYINT(1) NOT NULL DEFAULT '1',
  `colo_pp_type` TINYINT NOT NULL DEFAULT '1',
  `u_position` INT NULL DEFAULT NULL,
  `mounted_at` SMALLINT NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `IDX_79A52562D351EC` (`cabinet_id` ASC) VISIBLE,
  CONSTRAINT `FK_79A52562D351EC`
    FOREIGN KEY (`cabinet_id`)
    REFERENCES `ixpmanager`.`cabinet` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 68
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`patch_panel_port`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`patch_panel_port` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `switch_port_id` INT NULL DEFAULT NULL,
  `patch_panel_id` INT NULL DEFAULT NULL,
  `customer_id` INT NULL DEFAULT NULL,
  `duplex_master_id` INT NULL DEFAULT NULL,
  `description` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `number` SMALLINT NOT NULL,
  `state` INT NOT NULL,
  `colo_circuit_ref` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `colo_billing_ref` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `ticket_ref` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `notes` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `private_notes` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `assigned_at` DATE NULL DEFAULT NULL,
  `connected_at` DATE NULL DEFAULT NULL,
  `cease_requested_at` DATE NULL DEFAULT NULL,
  `ceased_at` DATE NULL DEFAULT NULL,
  `last_state_change` DATE NULL DEFAULT NULL,
  `internal_use` TINYINT(1) NOT NULL DEFAULT '0',
  `chargeable` INT NOT NULL DEFAULT '2',
  `owned_by` INT NOT NULL DEFAULT '0',
  `loa_code` VARCHAR(25) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `UNIQ_4BE40BC2C1DA6A2A` (`switch_port_id` ASC) VISIBLE,
  INDEX `IDX_4BE40BC2635D5D87` (`patch_panel_id` ASC) VISIBLE,
  INDEX `IDX_4BE40BC29395C3F3` (`customer_id` ASC) VISIBLE,
  INDEX `IDX_4BE40BC23838446` (`duplex_master_id` ASC) VISIBLE,
  CONSTRAINT `FK_4BE40BC23838446`
    FOREIGN KEY (`duplex_master_id`)
    REFERENCES `ixpmanager`.`patch_panel_port` (`id`),
  CONSTRAINT `FK_4BE40BC2635D5D87`
    FOREIGN KEY (`patch_panel_id`)
    REFERENCES `ixpmanager`.`patch_panel` (`id`),
  CONSTRAINT `FK_4BE40BC29395C3F3`
    FOREIGN KEY (`customer_id`)
    REFERENCES `ixpmanager`.`cust` (`id`)
    ON DELETE RESTRICT,
  CONSTRAINT `FK_4BE40BC2C1DA6A2A`
    FOREIGN KEY (`switch_port_id`)
    REFERENCES `ixpmanager`.`switchport` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 1582
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`patch_panel_port_file`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`patch_panel_port_file` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `patch_panel_port_id` INT NULL DEFAULT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `type` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `uploaded_at` DATETIME NOT NULL,
  `uploaded_by` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `size` INT NOT NULL,
  `is_private` TINYINT(1) NOT NULL DEFAULT '0',
  `storage_location` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `IDX_28089403B0F978FF` (`patch_panel_port_id` ASC) VISIBLE,
  CONSTRAINT `FK_28089403B0F978FF`
    FOREIGN KEY (`patch_panel_port_id`)
    REFERENCES `ixpmanager`.`patch_panel_port` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 42
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`patch_panel_port_history`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`patch_panel_port_history` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `patch_panel_port_id` INT NULL DEFAULT NULL,
  `duplex_master_id` INT NULL DEFAULT NULL,
  `description` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `number` SMALLINT NOT NULL,
  `state` INT NOT NULL,
  `colo_circuit_ref` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `colo_billing_ref` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `ticket_ref` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `notes` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `private_notes` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `assigned_at` DATE NULL DEFAULT NULL,
  `connected_at` DATE NULL DEFAULT NULL,
  `cease_requested_at` DATE NULL DEFAULT NULL,
  `ceased_at` DATE NULL DEFAULT NULL,
  `internal_use` TINYINT(1) NOT NULL DEFAULT '0',
  `chargeable` INT NOT NULL DEFAULT '0',
  `owned_by` INT NOT NULL DEFAULT '0',
  `cust_id` INT NULL DEFAULT NULL,
  `customer` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `switchport` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `IDX_CB80B54AB0F978FF` (`patch_panel_port_id` ASC) VISIBLE,
  INDEX `IDX_CB80B54A3838446` (`duplex_master_id` ASC) VISIBLE,
  CONSTRAINT `FK_CB80B54A3838446`
    FOREIGN KEY (`duplex_master_id`)
    REFERENCES `ixpmanager`.`patch_panel_port_history` (`id`),
  CONSTRAINT `FK_CB80B54AB0F978FF`
    FOREIGN KEY (`patch_panel_port_id`)
    REFERENCES `ixpmanager`.`patch_panel_port` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 70
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`patch_panel_port_history_file`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`patch_panel_port_history_file` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `patch_panel_port_history_id` INT NULL DEFAULT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `type` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `uploaded_at` DATETIME NOT NULL,
  `uploaded_by` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `size` INT NOT NULL,
  `is_private` TINYINT(1) NOT NULL DEFAULT '0',
  `storage_location` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `IDX_206EAD4E6F461430` (`patch_panel_port_history_id` ASC) VISIBLE,
  CONSTRAINT `FK_206EAD4E6F461430`
    FOREIGN KEY (`patch_panel_port_history_id`)
    REFERENCES `ixpmanager`.`patch_panel_port_history` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 2
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`pdb_networks`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`pdb_networks` (
  `asn` INT NOT NULL,
  `name` VARCHAR(255) NOT NULL,
  `info_never-via-route_server` TINYINT NOT NULL,
  `as-set` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `info_prefixes4` INT NULL DEFAULT NULL,
  `info_prefixes6` INT NULL DEFAULT NULL,
  `status` VARCHAR(255) NOT NULL,
  `updated` TEXT NOT NULL,
  `corp_www` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `ipv4-as-set` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `ipv6-as-set` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `irr` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `legal_name` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`asn`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`peering_manager`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`peering_manager` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `custid` INT NULL DEFAULT NULL,
  `peerid` INT NULL DEFAULT NULL,
  `email_last_sent` DATETIME NULL DEFAULT NULL,
  `emails_sent` INT NULL DEFAULT NULL,
  `peered` TINYINT(1) NULL DEFAULT NULL,
  `rejected` TINYINT(1) NULL DEFAULT NULL,
  `notes` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `IDX_35A72597DA0209B9` (`custid` ASC) VISIBLE,
  INDEX `IDX_35A725974E5F9AFF` (`peerid` ASC) VISIBLE,
  CONSTRAINT `FK_35A725974E5F9AFF`
    FOREIGN KEY (`peerid`)
    REFERENCES `ixpmanager`.`cust` (`id`)
    ON DELETE CASCADE,
  CONSTRAINT `FK_35A72597DA0209B9`
    FOREIGN KEY (`custid`)
    REFERENCES `ixpmanager`.`cust` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
AUTO_INCREMENT = 30
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`peering_matrix`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`peering_matrix` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `x_custid` INT NULL DEFAULT NULL,
  `y_custid` INT NULL DEFAULT NULL,
  `vlan` INT NULL DEFAULT NULL,
  `x_as` INT NULL DEFAULT NULL,
  `y_as` INT NULL DEFAULT NULL,
  `peering_status` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `updated` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `IDX_C1A6F6F9A4CA6408` (`x_custid` ASC) VISIBLE,
  INDEX `IDX_C1A6F6F968606496` (`y_custid` ASC) VISIBLE,
  CONSTRAINT `FK_C1A6F6F968606496`
    FOREIGN KEY (`y_custid`)
    REFERENCES `ixpmanager`.`cust` (`id`)
    ON DELETE CASCADE,
  CONSTRAINT `FK_C1A6F6F9A4CA6408`
    FOREIGN KEY (`x_custid`)
    REFERENCES `ixpmanager`.`cust` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`route_server_filters`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`route_server_filters` (
  `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
  `customer_id` INT NULL DEFAULT NULL,
  `peer_id` INT NULL DEFAULT NULL,
  `vlan_id` INT NULL DEFAULT NULL,
  `received_prefix` VARCHAR(43) NULL DEFAULT NULL,
  `advertised_prefix` VARCHAR(43) NULL DEFAULT NULL,
  `protocol` SMALLINT NULL DEFAULT NULL,
  `action_advertise` VARCHAR(255) NULL DEFAULT NULL,
  `action_receive` VARCHAR(255) NULL DEFAULT NULL,
  `enabled` TINYINT(1) NOT NULL DEFAULT '1',
  `order_by` INT NOT NULL,
  `live` VARCHAR(255) NOT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `route_server_filters_customer_id_order_by_unique` (`customer_id` ASC, `order_by` ASC) VISIBLE,
  INDEX `route_server_filters_peer_id_foreign` (`peer_id` ASC) VISIBLE,
  INDEX `route_server_filters_vlan_id_foreign` (`vlan_id` ASC) VISIBLE,
  CONSTRAINT `route_server_filters_customer_id_foreign`
    FOREIGN KEY (`customer_id`)
    REFERENCES `ixpmanager`.`cust` (`id`),
  CONSTRAINT `route_server_filters_peer_id_foreign`
    FOREIGN KEY (`peer_id`)
    REFERENCES `ixpmanager`.`cust` (`id`),
  CONSTRAINT `route_server_filters_vlan_id_foreign`
    FOREIGN KEY (`vlan_id`)
    REFERENCES `ixpmanager`.`vlan` (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`routers`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`routers` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `vlan_id` INT NOT NULL,
  `handle` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `protocol` SMALLINT UNSIGNED NOT NULL,
  `type` SMALLINT UNSIGNED NOT NULL,
  `name` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `shortname` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `router_id` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `peering_ip` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `asn` INT UNSIGNED NOT NULL,
  `software` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `software_version` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `operating_system` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `operating_system_version` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `mgmt_host` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `api` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `api_type` SMALLINT UNSIGNED NOT NULL,
  `lg_access` SMALLINT UNSIGNED NULL DEFAULT NULL,
  `quarantine` TINYINT(1) NOT NULL,
  `bgp_lc` TINYINT(1) NOT NULL,
  `rpki` TINYINT(1) NOT NULL DEFAULT '0',
  `rfc1997_passthru` TINYINT(1) NOT NULL DEFAULT '0',
  `template` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `skip_md5` TINYINT(1) NOT NULL,
  `last_updated` DATETIME NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `UNIQ_504FC9BE918020D9` (`handle` ASC) VISIBLE,
  INDEX `IDX_504FC9BE8B4937A1` (`vlan_id` ASC) VISIBLE,
  CONSTRAINT `FK_504FC9BE8B4937A1`
    FOREIGN KEY (`vlan_id`)
    REFERENCES `ixpmanager`.`vlan` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 57
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`rs_prefixes`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`rs_prefixes` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `custid` INT NULL DEFAULT NULL,
  `timestamp` DATETIME NULL DEFAULT NULL,
  `prefix` VARCHAR(64) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `protocol` INT NULL DEFAULT NULL,
  `irrdb` INT NULL DEFAULT NULL,
  `rs_origin` INT NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `IDX_29FA9871DA0209B9` (`custid` ASC) VISIBLE,
  CONSTRAINT `FK_29FA9871DA0209B9`
    FOREIGN KEY (`custid`)
    REFERENCES `ixpmanager`.`cust` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`sessions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`sessions` (
  `id` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `user_id` BIGINT NULL DEFAULT NULL,
  `ip_address` VARCHAR(45) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `user_agent` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `payload` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `last_activity` INT NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `sessions_id_unique` (`id` ASC) VISIBLE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`sflow_receiver`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`sflow_receiver` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `virtual_interface_id` INT NULL DEFAULT NULL,
  `dst_ip` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `dst_port` INT NOT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `IDX_E633EA142C0D6F5F` (`virtual_interface_id` ASC) VISIBLE,
  CONSTRAINT `FK_E633EA142C0D6F5F`
    FOREIGN KEY (`virtual_interface_id`)
    REFERENCES `ixpmanager`.`virtualinterface` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`telescope_entries`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`telescope_entries` (
  `sequence` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
  `uuid` CHAR(36) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `batch_id` CHAR(36) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `family_hash` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `should_display_on_index` TINYINT(1) NOT NULL DEFAULT '1',
  `type` VARCHAR(20) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `content` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `created_at` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`sequence`),
  UNIQUE INDEX `telescope_entries_uuid_unique` (`uuid` ASC) VISIBLE,
  INDEX `telescope_entries_batch_id_index` (`batch_id` ASC) VISIBLE,
  INDEX `telescope_entries_type_should_display_on_index_index` (`type` ASC, `should_display_on_index` ASC) VISIBLE,
  INDEX `telescope_entries_family_hash_index` (`family_hash` ASC) VISIBLE)
ENGINE = InnoDB
AUTO_INCREMENT = 126833
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`telescope_entries_tags`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`telescope_entries_tags` (
  `entry_uuid` CHAR(36) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `tag` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  INDEX `telescope_entries_tags_entry_uuid_tag_index` (`entry_uuid` ASC, `tag` ASC) VISIBLE,
  INDEX `telescope_entries_tags_tag_index` (`tag` ASC) VISIBLE,
  CONSTRAINT `telescope_entries_tags_entry_uuid_foreign`
    FOREIGN KEY (`entry_uuid`)
    REFERENCES `ixpmanager`.`telescope_entries` (`uuid`)
    ON DELETE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`telescope_monitoring`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`telescope_monitoring` (
  `tag` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`traffic_95th`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`traffic_95th` (
  `id` BIGINT NOT NULL AUTO_INCREMENT,
  `cust_id` INT NULL DEFAULT NULL,
  `datetime` DATETIME NULL DEFAULT NULL,
  `average` BIGINT NULL DEFAULT NULL,
  `max` BIGINT NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `IDX_70BB409ABFF2A482` (`cust_id` ASC) VISIBLE,
  CONSTRAINT `FK_70BB409ABFF2A482`
    FOREIGN KEY (`cust_id`)
    REFERENCES `ixpmanager`.`cust` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`traffic_95th_monthly`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`traffic_95th_monthly` (
  `id` BIGINT NOT NULL AUTO_INCREMENT,
  `cust_id` INT NULL DEFAULT NULL,
  `month` DATE NULL DEFAULT NULL,
  `max_95th` BIGINT NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `IDX_ED79F9DCBFF2A482` (`cust_id` ASC) VISIBLE,
  CONSTRAINT `FK_ED79F9DCBFF2A482`
    FOREIGN KEY (`cust_id`)
    REFERENCES `ixpmanager`.`cust` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`traffic_daily`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`traffic_daily` (
  `id` BIGINT NOT NULL AUTO_INCREMENT,
  `cust_id` INT NOT NULL,
  `day` DATE NULL DEFAULT NULL,
  `category` VARCHAR(10) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `day_avg_in` BIGINT NULL DEFAULT NULL,
  `day_avg_out` BIGINT NULL DEFAULT NULL,
  `day_max_in` BIGINT NULL DEFAULT NULL,
  `day_max_out` BIGINT NULL DEFAULT NULL,
  `day_tot_in` BIGINT NULL DEFAULT NULL,
  `day_tot_out` BIGINT NULL DEFAULT NULL,
  `week_avg_in` BIGINT NULL DEFAULT NULL,
  `week_avg_out` BIGINT NULL DEFAULT NULL,
  `week_max_in` BIGINT NULL DEFAULT NULL,
  `week_max_out` BIGINT NULL DEFAULT NULL,
  `week_tot_in` BIGINT NULL DEFAULT NULL,
  `week_tot_out` BIGINT NULL DEFAULT NULL,
  `month_avg_in` BIGINT NULL DEFAULT NULL,
  `month_avg_out` BIGINT NULL DEFAULT NULL,
  `month_max_in` BIGINT NULL DEFAULT NULL,
  `month_max_out` BIGINT NULL DEFAULT NULL,
  `month_tot_in` BIGINT NULL DEFAULT NULL,
  `month_tot_out` BIGINT NULL DEFAULT NULL,
  `year_avg_in` BIGINT NULL DEFAULT NULL,
  `year_avg_out` BIGINT NULL DEFAULT NULL,
  `year_max_in` BIGINT NULL DEFAULT NULL,
  `year_max_out` BIGINT NULL DEFAULT NULL,
  `year_tot_in` BIGINT NULL DEFAULT NULL,
  `year_tot_out` BIGINT NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `IDX_1F0F81A7BFF2A482` (`cust_id` ASC) VISIBLE,
  CONSTRAINT `FK_1F0F81A7BFF2A482`
    FOREIGN KEY (`cust_id`)
    REFERENCES `ixpmanager`.`cust` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
AUTO_INCREMENT = 120821
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`traffic_daily_phys_ints`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`traffic_daily_phys_ints` (
  `id` BIGINT NOT NULL AUTO_INCREMENT,
  `physicalinterface_id` INT NOT NULL,
  `day` DATE NULL DEFAULT NULL,
  `category` VARCHAR(10) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `day_avg_in` BIGINT NULL DEFAULT NULL,
  `day_avg_out` BIGINT NULL DEFAULT NULL,
  `day_max_in` BIGINT NULL DEFAULT NULL,
  `day_max_out` BIGINT NULL DEFAULT NULL,
  `day_max_in_at` DATETIME NULL DEFAULT NULL,
  `day_max_out_at` DATETIME NULL DEFAULT NULL,
  `day_tot_in` BIGINT NULL DEFAULT NULL,
  `day_tot_out` BIGINT NULL DEFAULT NULL,
  `week_avg_in` BIGINT NULL DEFAULT NULL,
  `week_avg_out` BIGINT NULL DEFAULT NULL,
  `week_max_in` BIGINT NULL DEFAULT NULL,
  `week_max_out` BIGINT NULL DEFAULT NULL,
  `week_max_in_at` DATETIME NULL DEFAULT NULL,
  `week_max_out_at` DATETIME NULL DEFAULT NULL,
  `week_tot_in` BIGINT NULL DEFAULT NULL,
  `week_tot_out` BIGINT NULL DEFAULT NULL,
  `month_avg_in` BIGINT NULL DEFAULT NULL,
  `month_avg_out` BIGINT NULL DEFAULT NULL,
  `month_max_in` BIGINT NULL DEFAULT NULL,
  `month_max_out` BIGINT NULL DEFAULT NULL,
  `month_max_in_at` DATETIME NULL DEFAULT NULL,
  `month_max_out_at` DATETIME NULL DEFAULT NULL,
  `month_tot_in` BIGINT NULL DEFAULT NULL,
  `month_tot_out` BIGINT NULL DEFAULT NULL,
  `year_avg_in` BIGINT NULL DEFAULT NULL,
  `year_avg_out` BIGINT NULL DEFAULT NULL,
  `year_max_in` BIGINT NULL DEFAULT NULL,
  `year_max_out` BIGINT NULL DEFAULT NULL,
  `year_max_in_at` DATETIME NULL DEFAULT NULL,
  `year_max_out_at` DATETIME NULL DEFAULT NULL,
  `year_tot_in` BIGINT NULL DEFAULT NULL,
  `year_tot_out` BIGINT NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `IDX_E219461D4643D08A` (`physicalinterface_id` ASC) VISIBLE,
  CONSTRAINT `FK_E219461D4643D08A`
    FOREIGN KEY (`physicalinterface_id`)
    REFERENCES `ixpmanager`.`physicalinterface` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
AUTO_INCREMENT = 223301
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`user_2fa`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`user_2fa` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `user_id` INT NOT NULL,
  `enabled` TINYINT(1) NOT NULL DEFAULT '0',
  `secret` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `UNIQ_3AAA1488A76ED395` (`user_id` ASC) VISIBLE,
  CONSTRAINT `FK_3AAA1488A76ED395`
    FOREIGN KEY (`user_id`)
    REFERENCES `ixpmanager`.`user` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
AUTO_INCREMENT = 6
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`user_logins`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`user_logins` (
  `id` BIGINT NOT NULL AUTO_INCREMENT,
  `customer_to_user_id` INT NULL DEFAULT NULL,
  `user_id` INT NULL DEFAULT NULL,
  `ip` VARCHAR(39) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `at` DATETIME NOT NULL,
  `via` VARCHAR(50) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `IDX_6341CC99D43FEAE2` (`customer_to_user_id` ASC) VISIBLE,
  INDEX `at_idx` (`at` ASC) VISIBLE,
  INDEX `user_id_idx` (`user_id` ASC) VISIBLE,
  CONSTRAINT `FK_6341CC99D43FEAE2`
    FOREIGN KEY (`customer_to_user_id`)
    REFERENCES `ixpmanager`.`customer_to_users` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 2087
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`user_pref`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`user_pref` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `user_id` INT NULL DEFAULT NULL,
  `attribute` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `ix` INT NOT NULL DEFAULT '0',
  `op` VARCHAR(2) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `value` LONGTEXT CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NULL DEFAULT NULL,
  `expire` BIGINT NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE INDEX `IX_UserPreference_1` (`user_id` ASC, `attribute` ASC, `op` ASC, `ix` ASC) VISIBLE,
  INDEX `IDX_DBD4D4F8A76ED395` (`user_id` ASC) VISIBLE,
  CONSTRAINT `FK_DBD4D4F8A76ED395`
    FOREIGN KEY (`user_id`)
    REFERENCES `ixpmanager`.`user` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
AUTO_INCREMENT = 11
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;


-- -----------------------------------------------------
-- Table `ixpmanager`.`user_remember_tokens`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`user_remember_tokens` (
  `id` BIGINT NOT NULL AUTO_INCREMENT,
  `user_id` INT NOT NULL,
  `token` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `device` VARCHAR(255) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `ip` VARCHAR(39) CHARACTER SET 'utf8mb4' COLLATE 'utf8mb4_unicode_ci' NOT NULL,
  `expires` DATETIME NOT NULL,
  `is_2fa_complete` TINYINT(1) NOT NULL DEFAULT '0',
  `created_at` TIMESTAMP NULL DEFAULT NULL,
  `updated_at` TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `user_token` (`user_id` ASC, `token` ASC) VISIBLE,
  INDEX `IDX_E253302EA76ED395` (`user_id` ASC) VISIBLE,
  CONSTRAINT `FK_E253302EA76ED395`
    FOREIGN KEY (`user_id`)
    REFERENCES `ixpmanager`.`user` (`id`)
    ON DELETE CASCADE)
ENGINE = InnoDB
AUTO_INCREMENT = 31
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_unicode_ci;

USE `peeringdb` ;

-- -----------------------------------------------------
-- Table `peeringdb`.`django_migrations`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `peeringdb`.`django_migrations` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `app` VARCHAR(255) NOT NULL,
  `name` VARCHAR(255) NOT NULL,
  `applied` DATETIME(6) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 22
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `peeringdb`.`peeringdb_organization`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `peeringdb`.`peeringdb_organization` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `status` VARCHAR(255) NOT NULL,
  `created` DATETIME(6) NOT NULL,
  `updated` DATETIME(6) NOT NULL,
  `version` INT NOT NULL,
  `address1` VARCHAR(255) NOT NULL,
  `address2` VARCHAR(255) NOT NULL,
  `city` VARCHAR(255) NOT NULL,
  `state` VARCHAR(255) NOT NULL,
  `zipcode` VARCHAR(48) NOT NULL,
  `country` VARCHAR(2) NOT NULL,
  `latitude` DECIMAL(9,6) NULL DEFAULT NULL,
  `longitude` DECIMAL(9,6) NULL DEFAULT NULL,
  `name` VARCHAR(255) NOT NULL,
  `website` VARCHAR(255) NOT NULL,
  `notes` LONGTEXT NOT NULL,
  `floor` VARCHAR(255) NOT NULL,
  `suite` VARCHAR(255) NOT NULL,
  `aka` VARCHAR(255) NOT NULL,
  `name_long` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `name` (`name` ASC) VISIBLE)
ENGINE = InnoDB
AUTO_INCREMENT = 34230
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `peeringdb`.`peeringdb_facility`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `peeringdb`.`peeringdb_facility` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `status` VARCHAR(255) NOT NULL,
  `created` DATETIME(6) NOT NULL,
  `updated` DATETIME(6) NOT NULL,
  `version` INT NOT NULL,
  `address1` VARCHAR(255) NOT NULL,
  `address2` VARCHAR(255) NOT NULL,
  `city` VARCHAR(255) NOT NULL,
  `state` VARCHAR(255) NOT NULL,
  `zipcode` VARCHAR(48) NOT NULL,
  `country` VARCHAR(2) NOT NULL,
  `latitude` DECIMAL(9,6) NULL DEFAULT NULL,
  `longitude` DECIMAL(9,6) NULL DEFAULT NULL,
  `name` VARCHAR(255) NOT NULL,
  `website` VARCHAR(255) NOT NULL,
  `clli` VARCHAR(18) NOT NULL,
  `rencode` VARCHAR(18) NOT NULL,
  `npanxx` VARCHAR(21) NOT NULL,
  `notes` LONGTEXT NOT NULL,
  `org_id` INT NOT NULL,
  `sales_email` VARCHAR(254) NOT NULL,
  `sales_phone` VARCHAR(192) NOT NULL,
  `tech_email` VARCHAR(254) NOT NULL,
  `tech_phone` VARCHAR(192) NOT NULL,
  `floor` VARCHAR(255) NOT NULL,
  `suite` VARCHAR(255) NOT NULL,
  `aka` VARCHAR(255) NOT NULL,
  `name_long` VARCHAR(255) NOT NULL,
  `available_voltage_services` VARCHAR(255) NULL DEFAULT NULL,
  `diverse_serving_substations` TINYINT(1) NULL DEFAULT NULL,
  `property` VARCHAR(27) NULL DEFAULT NULL,
  `region_continent` VARCHAR(255) NULL DEFAULT NULL,
  `status_dashboard` VARCHAR(255) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `name` (`name` ASC) VISIBLE,
  INDEX `peeringdb_facility_org_id_3420d8f7_fk_peeringdb_organization_id` (`org_id` ASC) VISIBLE,
  CONSTRAINT `peeringdb_facility_org_id_3420d8f7_fk_peeringdb_organization_id`
    FOREIGN KEY (`org_id`)
    REFERENCES `peeringdb`.`peeringdb_organization` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 13206
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `peeringdb`.`peeringdb_ix`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `peeringdb`.`peeringdb_ix` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `status` VARCHAR(255) NOT NULL,
  `created` DATETIME(6) NOT NULL,
  `updated` DATETIME(6) NOT NULL,
  `version` INT NOT NULL,
  `name` VARCHAR(64) NOT NULL,
  `name_long` VARCHAR(255) NOT NULL,
  `city` VARCHAR(192) NOT NULL,
  `country` VARCHAR(2) NOT NULL,
  `notes` LONGTEXT NOT NULL,
  `region_continent` VARCHAR(255) NOT NULL,
  `media` VARCHAR(128) NOT NULL,
  `proto_unicast` TINYINT(1) NOT NULL,
  `proto_multicast` TINYINT(1) NOT NULL,
  `proto_ipv6` TINYINT(1) NOT NULL,
  `website` VARCHAR(255) NOT NULL,
  `url_stats` VARCHAR(255) NOT NULL,
  `tech_email` VARCHAR(254) NOT NULL,
  `tech_phone` VARCHAR(192) NOT NULL,
  `policy_email` VARCHAR(254) NOT NULL,
  `policy_phone` VARCHAR(192) NOT NULL,
  `org_id` INT NOT NULL,
  `ixf_last_import` DATETIME(6) NULL DEFAULT NULL,
  `ixf_net_count` INT NOT NULL,
  `aka` VARCHAR(255) NOT NULL,
  `service_level` VARCHAR(60) NOT NULL,
  `terms` VARCHAR(60) NOT NULL,
  `sales_email` VARCHAR(254) NOT NULL,
  `sales_phone` VARCHAR(192) NOT NULL,
  `status_dashboard` VARCHAR(255) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `name` (`name` ASC) VISIBLE,
  INDEX `peeringdb_ix_org_id_7c888cd3_fk_peeringdb_organization_id` (`org_id` ASC) VISIBLE,
  CONSTRAINT `peeringdb_ix_org_id_7c888cd3_fk_peeringdb_organization_id`
    FOREIGN KEY (`org_id`)
    REFERENCES `peeringdb`.`peeringdb_organization` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 4066
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `peeringdb`.`peeringdb_ix_facility`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `peeringdb`.`peeringdb_ix_facility` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `status` VARCHAR(255) NOT NULL,
  `created` DATETIME(6) NOT NULL,
  `updated` DATETIME(6) NOT NULL,
  `version` INT NOT NULL,
  `fac_id` INT NOT NULL,
  `ix_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `peeringdb_ix_facility_ix_id_fac_id_fd6e394f_uniq` (`ix_id` ASC, `fac_id` ASC) VISIBLE,
  INDEX `peeringdb_ix_facility_fac_id_4402e456_fk_peeringdb_facility_id` (`fac_id` ASC) VISIBLE,
  CONSTRAINT `peeringdb_ix_facility_fac_id_4402e456_fk_peeringdb_facility_id`
    FOREIGN KEY (`fac_id`)
    REFERENCES `peeringdb`.`peeringdb_facility` (`id`),
  CONSTRAINT `peeringdb_ix_facility_ix_id_59b7a91d_fk_peeringdb_ix_id`
    FOREIGN KEY (`ix_id`)
    REFERENCES `peeringdb`.`peeringdb_ix` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 4988
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `peeringdb`.`peeringdb_ixlan`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `peeringdb`.`peeringdb_ixlan` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `status` VARCHAR(255) NOT NULL,
  `created` DATETIME(6) NOT NULL,
  `updated` DATETIME(6) NOT NULL,
  `version` INT NOT NULL,
  `name` VARCHAR(255) NOT NULL,
  `descr` LONGTEXT NOT NULL,
  `mtu` INT UNSIGNED NULL DEFAULT NULL,
  `vlan` INT UNSIGNED NULL DEFAULT NULL,
  `dot1q_support` TINYINT(1) NOT NULL,
  `rs_asn` INT UNSIGNED NULL DEFAULT NULL,
  `arp_sponge` VARCHAR(17) NULL DEFAULT NULL,
  `ix_id` INT NOT NULL,
  `ixf_ixp_member_list_url` VARCHAR(200) NULL DEFAULT NULL,
  `ixf_ixp_member_list_url_visible` VARCHAR(64) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `arp_sponge` (`arp_sponge` ASC) VISIBLE,
  INDEX `peeringdb_ixlan_ix_id_3ba4157a_fk_peeringdb_ix_id` (`ix_id` ASC) VISIBLE,
  CONSTRAINT `peeringdb_ixlan_ix_id_3ba4157a_fk_peeringdb_ix_id`
    FOREIGN KEY (`ix_id`)
    REFERENCES `peeringdb`.`peeringdb_ix` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 4066
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `peeringdb`.`peeringdb_ixlan_prefix`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `peeringdb`.`peeringdb_ixlan_prefix` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `status` VARCHAR(255) NOT NULL,
  `created` DATETIME(6) NOT NULL,
  `updated` DATETIME(6) NOT NULL,
  `version` INT NOT NULL,
  `notes` VARCHAR(255) NOT NULL,
  `protocol` VARCHAR(64) NOT NULL,
  `prefix` VARCHAR(43) NOT NULL,
  `ixlan_id` INT NOT NULL,
  `in_dfz` TINYINT(1) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `prefix` (`prefix` ASC) VISIBLE,
  INDEX `peeringdb_ixlan_prefix_ixlan_id_d8e99297_fk_peeringdb_ixlan_id` (`ixlan_id` ASC) VISIBLE,
  CONSTRAINT `peeringdb_ixlan_prefix_ixlan_id_d8e99297_fk_peeringdb_ixlan_id`
    FOREIGN KEY (`ixlan_id`)
    REFERENCES `peeringdb`.`peeringdb_ixlan` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 3633
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `peeringdb`.`peeringdb_network`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `peeringdb`.`peeringdb_network` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `status` VARCHAR(255) NOT NULL,
  `created` DATETIME(6) NOT NULL,
  `updated` DATETIME(6) NOT NULL,
  `version` INT NOT NULL,
  `asn` INT UNSIGNED NOT NULL,
  `name` VARCHAR(255) NOT NULL,
  `aka` VARCHAR(255) NOT NULL,
  `irr_as_set` VARCHAR(255) NOT NULL,
  `website` VARCHAR(255) NOT NULL,
  `looking_glass` VARCHAR(255) NOT NULL,
  `route_server` VARCHAR(255) NOT NULL,
  `notes` LONGTEXT NOT NULL,
  `notes_private` LONGTEXT NOT NULL,
  `info_traffic` VARCHAR(39) NOT NULL,
  `info_ratio` VARCHAR(45) NOT NULL,
  `info_scope` VARCHAR(39) NOT NULL,
  `info_type` VARCHAR(60) NOT NULL,
  `info_prefixes4` INT UNSIGNED NULL DEFAULT NULL,
  `info_prefixes6` INT UNSIGNED NULL DEFAULT NULL,
  `info_unicast` TINYINT(1) NOT NULL,
  `info_multicast` TINYINT(1) NOT NULL,
  `info_ipv6` TINYINT(1) NOT NULL,
  `policy_url` VARCHAR(255) NOT NULL,
  `policy_general` VARCHAR(72) NOT NULL,
  `policy_locations` VARCHAR(72) NOT NULL,
  `policy_ratio` TINYINT(1) NOT NULL,
  `policy_contracts` VARCHAR(36) NOT NULL,
  `org_id` INT NOT NULL,
  `info_never_via_route_servers` TINYINT(1) NOT NULL,
  `name_long` VARCHAR(255) NOT NULL,
  `status_dashboard` VARCHAR(255) NULL DEFAULT NULL,
  `rir_status` VARCHAR(255) NULL DEFAULT NULL,
  `rir_status_updated` DATETIME(6) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `asn` (`asn` ASC) VISIBLE,
  UNIQUE INDEX `name` (`name` ASC) VISIBLE,
  INDEX `peeringdb_network_org_id_404d6106_fk_peeringdb_organization_id` (`org_id` ASC) VISIBLE,
  CONSTRAINT `peeringdb_network_org_id_404d6106_fk_peeringdb_organization_id`
    FOREIGN KEY (`org_id`)
    REFERENCES `peeringdb`.`peeringdb_organization` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 31966
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `peeringdb`.`peeringdb_network_contact`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `peeringdb`.`peeringdb_network_contact` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `status` VARCHAR(255) NOT NULL,
  `created` DATETIME(6) NOT NULL,
  `updated` DATETIME(6) NOT NULL,
  `version` INT NOT NULL,
  `role` VARCHAR(27) NOT NULL,
  `visible` VARCHAR(64) NOT NULL,
  `name` VARCHAR(254) NOT NULL,
  `phone` VARCHAR(100) NOT NULL,
  `email` VARCHAR(254) NOT NULL,
  `url` VARCHAR(255) NOT NULL,
  `net_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `peeringdb_network_co_net_id_8a6841df_fk_peeringdb` (`net_id` ASC) VISIBLE,
  CONSTRAINT `peeringdb_network_co_net_id_8a6841df_fk_peeringdb`
    FOREIGN KEY (`net_id`)
    REFERENCES `peeringdb`.`peeringdb_network` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 56871
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `peeringdb`.`peeringdb_network_facility`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `peeringdb`.`peeringdb_network_facility` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `status` VARCHAR(255) NOT NULL,
  `created` DATETIME(6) NOT NULL,
  `updated` DATETIME(6) NOT NULL,
  `version` INT NOT NULL,
  `local_asn` INT UNSIGNED NULL DEFAULT NULL,
  `avail_sonet` TINYINT(1) NOT NULL,
  `avail_ethernet` TINYINT(1) NOT NULL,
  `avail_atm` TINYINT(1) NOT NULL,
  `fac_id` INT NOT NULL,
  `net_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `peeringdb_network_facility_net_id_fac_id_local_asn_c5729102_uniq` (`net_id` ASC, `fac_id` ASC, `local_asn` ASC) VISIBLE,
  INDEX `peeringdb_network_fa_fac_id_30c45aca_fk_peeringdb` (`fac_id` ASC) VISIBLE,
  CONSTRAINT `peeringdb_network_fa_fac_id_30c45aca_fk_peeringdb`
    FOREIGN KEY (`fac_id`)
    REFERENCES `peeringdb`.`peeringdb_facility` (`id`),
  CONSTRAINT `peeringdb_network_fa_net_id_ca57491b_fk_peeringdb`
    FOREIGN KEY (`net_id`)
    REFERENCES `peeringdb`.`peeringdb_network` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 59605
DEFAULT CHARACTER SET = utf8mb3;


-- -----------------------------------------------------
-- Table `peeringdb`.`peeringdb_network_ixlan`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `peeringdb`.`peeringdb_network_ixlan` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `status` VARCHAR(255) NOT NULL,
  `created` DATETIME(6) NOT NULL,
  `updated` DATETIME(6) NOT NULL,
  `version` INT NOT NULL,
  `asn` INT UNSIGNED NOT NULL,
  `ipaddr4` VARCHAR(39) NULL DEFAULT NULL,
  `ipaddr6` VARCHAR(39) NULL DEFAULT NULL,
  `is_rs_peer` TINYINT(1) NOT NULL,
  `notes` VARCHAR(255) NOT NULL,
  `speed` INT UNSIGNED NOT NULL,
  `ixlan_id` INT NOT NULL,
  `net_id` INT NOT NULL,
  `operational` TINYINT(1) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `peeringdb_network_ixlan_ixlan_id_521451ed_fk_peeringdb_ixlan_id` (`ixlan_id` ASC) VISIBLE,
  INDEX `peeringdb_network_ixlan_net_id_9178e45e_fk_peeringdb_network_id` (`net_id` ASC) VISIBLE,
  CONSTRAINT `peeringdb_network_ixlan_ixlan_id_521451ed_fk_peeringdb_ixlan_id`
    FOREIGN KEY (`ixlan_id`)
    REFERENCES `peeringdb`.`peeringdb_ixlan` (`id`),
  CONSTRAINT `peeringdb_network_ixlan_net_id_9178e45e_fk_peeringdb_network_id`
    FOREIGN KEY (`net_id`)
    REFERENCES `peeringdb`.`peeringdb_network` (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 79644
DEFAULT CHARACTER SET = utf8mb3;

USE `ixpmanager` ;

-- -----------------------------------------------------
-- Placeholder table for view `ixpmanager`.`view_cust_current_active`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`view_cust_current_active` (`id` INT, `company_registered_detail_id` INT, `company_billing_details_id` INT, `irrdb` INT, `reseller` INT, `name` INT, `type` INT, `shortname` INT, `abbreviatedName` INT, `autsys` INT, `maxprefixes` INT, `peeringemail` INT, `nocphone` INT, `noc24hphone` INT, `nocfax` INT, `nocemail` INT, `nochours` INT, `nocwww` INT, `peeringmacro` INT, `peeringmacrov6` INT, `peeringpolicy` INT, `corpwww` INT, `datejoin` INT, `dateleave` INT, `status` INT, `activepeeringmatrix` INT, `lastupdated` INT, `lastupdatedby` INT, `creator` INT, `created` INT, `MD5Support` INT, `isReseller` INT, `in_manrs` INT, `in_peeringdb` INT, `peeringdb_oauth` INT);

-- -----------------------------------------------------
-- Placeholder table for view `ixpmanager`.`view_switch_details_by_custid`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`view_switch_details_by_custid` (`id` INT, `custid` INT, `virtualinterfacename` INT, `virtualinterfaceid` INT, `status` INT, `speed` INT, `duplex` INT, `notes` INT, `switchport` INT, `switchportid` INT, `spifname` INT, `switch` INT, `switchhostname` INT, `switchid` INT, `vendorid` INT, `snmppasswd` INT, `infrastructure` INT, `cabinet` INT, `colocabinet` INT, `locationname` INT, `locationshortname` INT);

-- -----------------------------------------------------
-- Placeholder table for view `ixpmanager`.`view_vlaninterface_details_by_custid`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ixpmanager`.`view_vlaninterface_details_by_custid` (`id` INT, `custid` INT, `virtualinterfaceid` INT, `status` INT, `virtualinterfacename` INT, `vlan` INT, `vlanname` INT, `vlanid` INT, `vlaninterfaceid` INT, `ipv4enabled` INT, `ipv4hostname` INT, `ipv4canping` INT, `ipv4monitorrcbgp` INT, `ipv6enabled` INT, `ipv6hostname` INT, `ipv6canping` INT, `ipv6monitorrcbgp` INT, `as112client` INT, `mcastenabled` INT, `ipv4bgpmd5secret` INT, `ipv6bgpmd5secret` INT, `rsclient` INT, `irrdbfilter` INT, `busyhost` INT, `notes` INT, `ipv4address` INT, `ipv6address` INT);

-- -----------------------------------------------------
-- View `ixpmanager`.`view_cust_current_active`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ixpmanager`.`view_cust_current_active`;
USE `ixpmanager`;
CREATE  OR REPLACE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `ixpmanager`.`view_cust_current_active` AS select `cu`.`id` AS `id`,`cu`.`company_registered_detail_id` AS `company_registered_detail_id`,`cu`.`company_billing_details_id` AS `company_billing_details_id`,`cu`.`irrdb` AS `irrdb`,`cu`.`reseller` AS `reseller`,`cu`.`name` AS `name`,`cu`.`type` AS `type`,`cu`.`shortname` AS `shortname`,`cu`.`abbreviatedName` AS `abbreviatedName`,`cu`.`autsys` AS `autsys`,`cu`.`maxprefixes` AS `maxprefixes`,`cu`.`peeringemail` AS `peeringemail`,`cu`.`nocphone` AS `nocphone`,`cu`.`noc24hphone` AS `noc24hphone`,`cu`.`nocfax` AS `nocfax`,`cu`.`nocemail` AS `nocemail`,`cu`.`nochours` AS `nochours`,`cu`.`nocwww` AS `nocwww`,`cu`.`peeringmacro` AS `peeringmacro`,`cu`.`peeringmacrov6` AS `peeringmacrov6`,`cu`.`peeringpolicy` AS `peeringpolicy`,`cu`.`corpwww` AS `corpwww`,`cu`.`datejoin` AS `datejoin`,`cu`.`dateleave` AS `dateleave`,`cu`.`status` AS `status`,`cu`.`activepeeringmatrix` AS `activepeeringmatrix`,`cu`.`lastupdated` AS `lastupdated`,`cu`.`lastupdatedby` AS `lastupdatedby`,`cu`.`creator` AS `creator`,`cu`.`created` AS `created`,`cu`.`MD5Support` AS `MD5Support`,`cu`.`isReseller` AS `isReseller`,`cu`.`in_manrs` AS `in_manrs`,`cu`.`in_peeringdb` AS `in_peeringdb`,`cu`.`peeringdb_oauth` AS `peeringdb_oauth` from `ixpmanager`.`cust` `cu` where ((`cu`.`datejoin` <= curdate()) and ((`cu`.`dateleave` is null) or (`cu`.`dateleave` < '1970-01-01') or (`cu`.`dateleave` >= curdate())) and ((`cu`.`status` = 1) or (`cu`.`status` = 2)));

-- -----------------------------------------------------
-- View `ixpmanager`.`view_switch_details_by_custid`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ixpmanager`.`view_switch_details_by_custid`;
USE `ixpmanager`;
CREATE  OR REPLACE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `ixpmanager`.`view_switch_details_by_custid` AS select `vi`.`id` AS `id`,`vi`.`custid` AS `custid`,concat(`vi`.`name`,`vi`.`channelgroup`) AS `virtualinterfacename`,`pi`.`virtualinterfaceid` AS `virtualinterfaceid`,`pi`.`status` AS `status`,`pi`.`speed` AS `speed`,`pi`.`duplex` AS `duplex`,`pi`.`notes` AS `notes`,`sp`.`name` AS `switchport`,`sp`.`id` AS `switchportid`,`sp`.`ifName` AS `spifname`,`sw`.`name` AS `switch`,`sw`.`hostname` AS `switchhostname`,`sw`.`id` AS `switchid`,`sw`.`vendorid` AS `vendorid`,`sw`.`snmppasswd` AS `snmppasswd`,`sw`.`infrastructure` AS `infrastructure`,`ca`.`name` AS `cabinet`,`ixpmanager`.`ca`.`cololocation` AS `colocabinet`,`ixpmanager`.`lo`.`name` AS `locationname`,`ixpmanager`.`lo`.`shortname` AS `locationshortname` from (((((`ixpmanager`.`virtualinterface` `vi` join `ixpmanager`.`physicalinterface` `pi`) join `ixpmanager`.`switchport` `sp`) join `ixpmanager`.`switch` `sw`) join `ixpmanager`.`cabinet` `ca`) join `ixpmanager`.`location` `lo`) where ((`ixpmanager`.`pi`.`virtualinterfaceid` = `ixpmanager`.`vi`.`id`) and (`ixpmanager`.`pi`.`switchportid` = `ixpmanager`.`sp`.`id`) and (`ixpmanager`.`sp`.`switchid` = `ixpmanager`.`sw`.`id`) and (`ixpmanager`.`sw`.`cabinetid` = `ixpmanager`.`ca`.`id`) and (`ixpmanager`.`ca`.`locationid` = `ixpmanager`.`lo`.`id`));

-- -----------------------------------------------------
-- View `ixpmanager`.`view_vlaninterface_details_by_custid`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ixpmanager`.`view_vlaninterface_details_by_custid`;
USE `ixpmanager`;
CREATE  OR REPLACE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `ixpmanager`.`view_vlaninterface_details_by_custid` AS select `pi`.`id` AS `id`,`vi`.`custid` AS `custid`,`pi`.`virtualinterfaceid` AS `virtualinterfaceid`,`pi`.`status` AS `status`,concat(`vi`.`name`,`vi`.`channelgroup`) AS `virtualinterfacename`,`ixpmanager`.`vlan`.`number` AS `vlan`,`ixpmanager`.`vlan`.`name` AS `vlanname`,`ixpmanager`.`vlan`.`id` AS `vlanid`,`vli`.`id` AS `vlaninterfaceid`,`vli`.`ipv4enabled` AS `ipv4enabled`,`vli`.`ipv4hostname` AS `ipv4hostname`,`vli`.`ipv4canping` AS `ipv4canping`,`vli`.`ipv4monitorrcbgp` AS `ipv4monitorrcbgp`,`vli`.`ipv6enabled` AS `ipv6enabled`,`vli`.`ipv6hostname` AS `ipv6hostname`,`vli`.`ipv6canping` AS `ipv6canping`,`vli`.`ipv6monitorrcbgp` AS `ipv6monitorrcbgp`,`vli`.`as112client` AS `as112client`,`vli`.`mcastenabled` AS `mcastenabled`,`vli`.`ipv4bgpmd5secret` AS `ipv4bgpmd5secret`,`vli`.`ipv6bgpmd5secret` AS `ipv6bgpmd5secret`,`vli`.`rsclient` AS `rsclient`,`vli`.`irrdbfilter` AS `irrdbfilter`,`vli`.`busyhost` AS `busyhost`,`vli`.`notes` AS `notes`,`v4`.`address` AS `ipv4address`,`v6`.`address` AS `ipv6address` from ((`ixpmanager`.`physicalinterface` `pi` join `ixpmanager`.`virtualinterface` `vi`) join (((`ixpmanager`.`vlaninterface` `vli` left join `ixpmanager`.`ipv4address` `v4` on((`vli`.`ipv4addressid` = `v4`.`id`))) left join `ixpmanager`.`ipv6address` `v6` on((`vli`.`ipv6addressid` = `v6`.`id`))) left join `ixpmanager`.`vlan` on((`vli`.`vlanid` = `ixpmanager`.`vlan`.`id`)))) where ((`pi`.`virtualinterfaceid` = `vi`.`id`) and (`vli`.`virtualinterfaceid` = `vi`.`id`));
USE `ixpmanager`;

DELIMITER $$
USE `ixpmanager`$$
CREATE
DEFINER=`root`@`localhost`
TRIGGER `ixpmanager`.`bgp_sessions_update`
AFTER INSERT ON `ixpmanager`.`bgpsessiondata`
FOR EACH ROW
BEGIN

		IF NOT EXISTS ( SELECT 1 FROM bgp_sessions WHERE srcipaddressid = NEW.srcipaddressid AND protocol = NEW.protocol AND dstipaddressid = NEW.dstipaddressid ) THEN
			INSERT INTO bgp_sessions
				( srcipaddressid, protocol, dstipaddressid, packetcount, last_seen, source )
			VALUES
				( NEW.srcipaddressid, NEW.protocol, NEW.dstipaddressid, NEW.packetcount, NOW(), NEW.source );
		ELSE
			UPDATE bgp_sessions SET
				last_seen   = NOW(),
				packetcount = packetcount + NEW.packetcount
			WHERE
				srcipaddressid = NEW.srcipaddressid AND protocol = NEW.protocol AND dstipaddressid = NEW.dstipaddressid;
		END IF;

		IF NOT EXISTS ( SELECT 1 FROM bgp_sessions WHERE dstipaddressid = NEW.srcipaddressid AND protocol = NEW.protocol AND srcipaddressid = NEW.dstipaddressid ) THEN
			INSERT INTO bgp_sessions
				( srcipaddressid, protocol, dstipaddressid, packetcount, last_seen, source )
			VALUES
				( NEW.dstipaddressid, NEW.protocol, NEW.srcipaddressid, NEW.packetcount, NOW(), NEW.source );
		ELSE
			UPDATE bgp_sessions SET
				last_seen   = NOW(),
				packetcount = packetcount + NEW.packetcount
			WHERE
				dstipaddressid = NEW.srcipaddressid AND protocol = NEW.protocol AND srcipaddressid = NEW.dstipaddressid;
		END IF;

	END$$


DELIMITER ;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
